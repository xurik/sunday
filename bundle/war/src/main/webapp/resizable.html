<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>jQuery UI Example Page</title>
    <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.23.custom.css" rel="stylesheet" />

    <script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.23.custom.min.js"></script>
    <script type="text/javascript">
        (function($){
            $(document).ready(function(){
                $( ".root").draggable({
                    appendTo: ".demo",
                    helper: "clone",
                    start : function(event,ui){

                    }
                });
                $( ".j-tr").draggable({
                    appendTo: ".demo",
                    helper: "clone",
                    start : function(event,ui){

                    }
                });
                $( "td").draggable({
                    helper: "clone",
                    stop: function(event, ui) {
                        $(".droppable").droppable().droppable( "enable" );
                    },
                    start : function(event,ui){
                        $(".droppable").droppable().droppable( "disable" );
                        $("#trash").droppable( "enable" );
                    }
                });
               $(".droppable").droppable(
                       {
                           activeClass: "ui-state-default",
                           drop:function(event, ui){
                               alert(ui.draggable.hasClass("j-tr"));
                               if(ui.draggable.hasClass("root")){
                                   var tmp = ui.draggable.clone();
                                   tmp.removeClass("root");
                                   tmp.removeClass("cmp");
                                   tmp.attr("id",new Date());
                                   $( tmp ).draggable({
                                       appendTo: ".demo",
                                       helper: "clone"
                                   });
                                   $(tmp).click(function(){
                                       alert("cmp")
                                   })
                                   $(tmp).appendTo( this );

                               } else if(ui.draggable.hasClass("j-tr")){
                                   $(this).append("<tr></tr>");
                               }
                               else{
                                   $(this).append(ui.draggable);
                               }

                           }
                       }
               );
                $("#trash").droppable({
                    drop : function(event,ui){
                        activeClass: "ui-state-default",
                        ui.draggable.remove();
                    }
                })

            });
        })(jQuery);
    </script>
</head>
<body style="width: 100%;height: 100%">
    <label  id="label1" class="root">label:<input /></label>
    <label  id="tr1" class="j-tr">tr11</label>
<div class="demo">
    <div>
        <table border="1" style="width: 600px;height: 100%">
            <tbody>
                <tr style="height: 30px;">
                    <td id="a" style="width: 300px" class="droppable"></td>
                    <td id="b" style="width: 300px" class="droppable"></td>
                </tr>
                <tr style="height: 30px;">
                    <td id="c" colspan="2" class="droppable"></td>
                </tr>

            </tbody>
        </table>
    </div>
    <div id="trash" style="height: 20px;height: 20px;" class="droppable">
        垃圾箱
    </div>

</div><!-- End demo -->
    <table border="1" class="droppable">
        <thead>
            <tr>
                <th>初始化</th>
            </tr>
        </thead>
    </table>




</body>
</html>